{"ast":null,"code":"import _defineProperty from \"/workspace/nft-ticket-market/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _regeneratorRuntime from \"/workspace/nft-ticket-market/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/workspace/nft-ticket-market/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/workspace/nft-ticket-market/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/workspace/nft-ticket-market/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/workspace/nft-ticket-market/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/workspace/nft-ticket-market/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/workspace/nft-ticket-market/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/workspace/nft-ticket-market/client/src/components/Event.jsx\";\nimport React, { Component } from 'react';\nimport Web3 from 'web3';\nimport festivalFactory from '../proxies/FestivalFactory';\nimport festToken from '../proxies/FestToken';\nimport FestivalNFT from '../proxies/FestivalNFT';\nimport renderNotification from '../utils/notification-handler';\nvar web3;\n\nvar Festival = /*#__PURE__*/function (_Component) {\n  _inherits(Festival, _Component);\n\n  function Festival() {\n    var _this;\n\n    _classCallCheck(this, Festival);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Festival).call(this));\n\n    _this.onCreateFestival = /*#__PURE__*/function () {\n      var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(e) {\n        var organiser, _this$state, name, symbol, price, supply, _yield$festivalFactor, _yield$festivalFactor2, ntfAddress, marketplaceAddress, nftInstance, batches, batchSupply, curCount, prevCount, res, i, _res;\n\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.prev = 0;\n                e.preventDefault();\n                _context.next = 4;\n                return web3.eth.getCoinbase();\n\n              case 4:\n                organiser = _context.sent;\n                _this$state = _this.state, name = _this$state.name, symbol = _this$state.symbol, price = _this$state.price, supply = _this$state.supply;\n                _context.next = 8;\n                return festivalFactory.methods.createNewFest(festToken._address, name, symbol, web3.utils.toWei(price, 'ether'), supply).send({\n                  from: organiser,\n                  gas: 6700000\n                });\n\n              case 8:\n                _yield$festivalFactor = _context.sent;\n                _yield$festivalFactor2 = _yield$festivalFactor.events.Created.returnValues;\n                ntfAddress = _yield$festivalFactor2.ntfAddress;\n                marketplaceAddress = _yield$festivalFactor2.marketplaceAddress;\n                renderNotification('success', 'Success', \"Festival Created Successfully!\");\n                _context.next = 15;\n                return FestivalNFT(ntfAddress);\n\n              case 15:\n                nftInstance = _context.sent;\n                batches = Math.ceil(supply / 30);\n                batchSupply = 30;\n                curCount = 0;\n                prevCount = 0;\n\n                if (!(supply < 30)) {\n                  _context.next = 26;\n                  break;\n                }\n\n                _context.next = 23;\n                return nftInstance.methods.bulkMintTickets(supply, marketplaceAddress).send({\n                  from: organiser,\n                  gas: 6700000\n                });\n\n              case 23:\n                res = _context.sent;\n                _context.next = 37;\n                break;\n\n              case 26:\n                i = 0;\n\n              case 27:\n                if (!(i < batches)) {\n                  _context.next = 37;\n                  break;\n                }\n\n                prevCount = curCount;\n                curCount += 30;\n\n                if (supply < curCount) {\n                  batchSupply = supply - prevCount;\n                }\n\n                _context.next = 33;\n                return nftInstance.methods.bulkMintTickets(batchSupply, marketplaceAddress).send({\n                  from: organiser,\n                  gas: 6700000\n                });\n\n              case 33:\n                _res = _context.sent;\n\n              case 34:\n                i++;\n                _context.next = 27;\n                break;\n\n              case 37:\n                _context.next = 43;\n                break;\n\n              case 39:\n                _context.prev = 39;\n                _context.t0 = _context[\"catch\"](0);\n                console.log('Error while creating new festival', _context.t0);\n                renderNotification('danger', 'Error', \"\".concat(_context.t0.message));\n\n              case 43:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, null, [[0, 39]]);\n      }));\n\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }();\n\n    _this.inputChangedHandler = function (e) {\n      var state = _this.state;\n      state[e.target.name] = e.target.value;\n\n      _this.setState(state);\n    };\n\n    _this.state = {\n      name: null,\n      symbol: null,\n      price: null,\n      suppply: null\n    };\n    web3 = new Web3(window.ethereum);\n    return _this;\n  }\n\n  _createClass(Festival, [{\n    key: \"render\",\n    value: function render() {\n      var _React$createElement;\n\n      return /*#__PURE__*/React.createElement(\"div\", {\n        class: \"container center\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        class: \"row\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        class: \"container \",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        class: \"container \",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"h5\", {\n        style: {\n          padding: \"30px 0px 0px 10px\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 15\n        }\n      }, \"Create new Festival\"), /*#__PURE__*/React.createElement(\"form\", {\n        class: \"\",\n        onSubmit: this.onCreateFestival,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        class: \"left\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 17\n        }\n      }, \"Fest Name\"), /*#__PURE__*/React.createElement(\"input\", (_React$createElement = {\n        id: \"name\",\n        class: \"validate\",\n        placeholder: \"Fest Name\",\n        type: \"text\"\n      }, _defineProperty(_React$createElement, \"class\", \"validate\"), _defineProperty(_React$createElement, \"name\", \"name\"), _defineProperty(_React$createElement, \"onChange\", this.inputChangedHandler), _defineProperty(_React$createElement, \"__self\", this), _defineProperty(_React$createElement, \"__source\", {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 54\n      }), _React$createElement)), /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 191\n        }\n      }), /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 197\n        }\n      }), /*#__PURE__*/React.createElement(\"label\", {\n        class: \"left\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 17\n        }\n      }, \"Fest Symbol\"), /*#__PURE__*/React.createElement(\"input\", {\n        id: \"symbol\",\n        class: \"validate\",\n        placeholder: \"Fest Symbol\",\n        type: \"text\",\n        className: \"input-control\",\n        name: \"symbol\",\n        onChange: this.inputChangedHandler,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 56\n        }\n      }), /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 208\n        }\n      }), /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 214\n        }\n      }), /*#__PURE__*/React.createElement(\"label\", {\n        class: \"left\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 17\n        }\n      }, \"Ticket Price\"), /*#__PURE__*/React.createElement(\"input\", {\n        id: \"price\",\n        placeholder: \"Ticket Price\",\n        type: \"text\",\n        className: \"input-control\",\n        name: \"price\",\n        onChange: this.inputChangedHandler,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 57\n        }\n      }), /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 191\n        }\n      }), /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 197\n        }\n      }), /*#__PURE__*/React.createElement(\"label\", {\n        class: \"left\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 17\n        }\n      }, \"Total Supply\"), /*#__PURE__*/React.createElement(\"input\", {\n        id: \"supply\",\n        placeholder: \"Total SUpply\",\n        type: \"text\",\n        className: \"input-control\",\n        name: \"supply\",\n        onChange: this.inputChangedHandler,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 57\n        }\n      }), /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 199\n        }\n      }), /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 205\n        }\n      }), /*#__PURE__*/React.createElement(\"button\", {\n        type: \"submit\",\n        className: \"custom-btn login-btn\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 17\n        }\n      }, \"Create Festival\"))))));\n    }\n  }]);\n\n  return Festival;\n}(Component);\n\nexport default Festival;","map":{"version":3,"sources":["/workspace/nft-ticket-market/client/src/components/Event.jsx"],"names":["React","Component","Web3","festivalFactory","festToken","FestivalNFT","renderNotification","web3","Festival","onCreateFestival","e","preventDefault","eth","getCoinbase","organiser","state","name","symbol","price","supply","methods","createNewFest","_address","utils","toWei","send","from","gas","events","Created","returnValues","ntfAddress","marketplaceAddress","nftInstance","batches","Math","ceil","batchSupply","curCount","prevCount","bulkMintTickets","res","i","console","log","message","inputChangedHandler","target","value","setState","suppply","window","ethereum","padding"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport Web3 from 'web3';\nimport festivalFactory from '../proxies/FestivalFactory';\nimport festToken from '../proxies/FestToken';\nimport FestivalNFT from '../proxies/FestivalNFT';\nimport renderNotification from '../utils/notification-handler';\n\nlet web3;\n\nclass Festival extends Component {\n  constructor() {\n    super();\n\n    this.state = {\n      name: null,\n      symbol: null,\n      price: null,\n      suppply: null,\n    };\n\n    web3 = new Web3(window.ethereum);\n  }\n\n  onCreateFestival = async (e) => {\n    try {\n      e.preventDefault();\n\n      const organiser = await web3.eth.getCoinbase();\n      const { name, symbol, price, supply } = this.state;\n      const { events: { Created: { returnValues: { ntfAddress, marketplaceAddress } } } } = await festivalFactory.methods.createNewFest(\n        festToken._address,\n        name,\n        symbol,\n        web3.utils.toWei(price, 'ether'),\n        supply\n      ).send({ from: organiser, gas: 6700000 });\n\n      renderNotification('success', 'Success', `Festival Created Successfully!`);\n\n      const nftInstance = await FestivalNFT(ntfAddress);\n      const batches = Math.ceil(supply / 30);\n      let batchSupply = 30;\n      let curCount = 0\n      let prevCount = 0\n\n      if (supply < 30) {\n        const res = await nftInstance.methods.bulkMintTickets(supply, marketplaceAddress).send({ from: organiser, gas: 6700000 });\n      } else {\n        for (let i = 0; i < batches; i++) {\n          prevCount = curCount;\n          curCount += 30;\n          if (supply < curCount) {\n            batchSupply = supply - prevCount;\n          }\n          const res = await nftInstance.methods.bulkMintTickets(batchSupply, marketplaceAddress).send({ from: organiser, gas: 6700000 });\n        }\n      }\n    } catch (err) {\n      console.log('Error while creating new festival', err);\n      renderNotification('danger', 'Error', `${err.message}`);\n    }\n  }\n\n  inputChangedHandler = (e) => {\n    const state = this.state;\n    state[e.target.name] = e.target.value;\n    this.setState(state);\n  }\n\n  render() {\n    return (\n      <div class=\"container center\" >\n        <div class=\"row\">\n          <div class=\"container \">\n            <div class=\"container \">\n              <h5 style={{ padding: \"30px 0px 0px 10px\" }}>Create new Festival</h5>\n              <form class=\"\" onSubmit={this.onCreateFestival}>\n                <label class=\"left\">Fest Name</label><input id=\"name\" class=\"validate\" placeholder=\"Fest Name\" type=\"text\" class=\"validate\" name=\"name\" onChange={this.inputChangedHandler} /><br /><br />\n                <label class=\"left\">Fest Symbol</label><input id=\"symbol\" class=\"validate\" placeholder=\"Fest Symbol\" type=\"text\" className=\"input-control\" name=\"symbol\" onChange={this.inputChangedHandler} /><br /><br />\n                <label class=\"left\">Ticket Price</label><input id=\"price\" placeholder=\"Ticket Price\" type=\"text\" className=\"input-control\" name=\"price\" onChange={this.inputChangedHandler} /><br /><br />\n                <label class=\"left\">Total Supply</label><input id=\"supply\" placeholder=\"Total SUpply\" type=\"text\" className=\"input-control\" name=\"supply\" onChange={this.inputChangedHandler}></input><br /><br />\n\n                <button type=\"submit\" className=\"custom-btn login-btn\">Create Festival</button>\n              </form>\n            </div>\n          </div>\n        </div>\n      </div >\n    )\n  }\n}\n\nexport default Festival;"]},"metadata":{},"sourceType":"module"}