{"ast":null,"code":"import _defineProperty from \"/workspace/nft-ticket-market/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _regeneratorRuntime from \"/workspace/nft-ticket-market/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _slicedToArray from \"/workspace/nft-ticket-market/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _asyncToGenerator from \"/workspace/nft-ticket-market/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/workspace/nft-ticket-market/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/workspace/nft-ticket-market/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/workspace/nft-ticket-market/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/workspace/nft-ticket-market/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/workspace/nft-ticket-market/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/workspace/nft-ticket-market/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/workspace/nft-ticket-market/client/src/components/Purchase.jsx\";\nimport React, { Component } from 'react';\nimport Web3 from 'web3';\nimport eventFactory from '../proxies/eventFactory';\nimport EventNFT from '../proxies/EventNFT';\nimport EventMarketplace from '../proxies/EventMarketplace';\nimport eventToken from '../proxies/EventToken';\nimport renderNotification from '../utils/notification-handler';\nvar web3;\n\nvar Purchase = /*#__PURE__*/function (_Component) {\n  _inherits(Purchase, _Component);\n\n  function Purchase() {\n    var _this;\n\n    _classCallCheck(this, Purchase);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Purchase).call(this));\n    _this.updateEvents = /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n      var initiator, activeEvents, events;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.prev = 0;\n              _context2.next = 3;\n              return web3.eth.getCoinbase();\n\n            case 3:\n              initiator = _context2.sent;\n              _context2.next = 6;\n              return eventFactory.methods.getActiveEvents().call({\n                from: initiator\n              });\n\n            case 6:\n              activeEvents = _context2.sent;\n              _context2.next = 9;\n              return Promise.all(activeEvents.map( /*#__PURE__*/function () {\n                var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(fest) {\n                  var eventDetails, _Object$values, _Object$values2, eventName, eventSymbol, ticketPrice, totalSupply, marketplace, nftInstance, saleId;\n\n                  return _regeneratorRuntime.wrap(function _callee$(_context) {\n                    while (1) {\n                      switch (_context.prev = _context.next) {\n                        case 0:\n                          _context.next = 2;\n                          return eventFactory.methods.getEventDetails(event).call({\n                            from: initiator\n                          });\n\n                        case 2:\n                          eventDetails = _context.sent;\n                          _Object$values = Object.values(eventDetails), _Object$values2 = _slicedToArray(_Object$values, 5), eventName = _Object$values2[0], eventSymbol = _Object$values2[1], ticketPrice = _Object$values2[2], totalSupply = _Object$values2[3], marketplace = _Object$values2[4];\n                          _context.next = 6;\n                          return EventNFT(event);\n\n                        case 6:\n                          nftInstance = _context.sent;\n                          _context.next = 9;\n                          return nftInstance.methods.getNextSaleTicketId().call({\n                            from: initiator\n                          });\n\n                        case 9:\n                          saleId = _context.sent;\n                          return _context.abrupt(\"return\", /*#__PURE__*/React.createElement(\"tr\", {\n                            key: event,\n                            __self: _assertThisInitialized(_assertThisInitialized(_this)),\n                            __source: {\n                              fileName: _jsxFileName,\n                              lineNumber: 37,\n                              columnNumber: 11\n                            }\n                          }, /*#__PURE__*/React.createElement(\"td\", {\n                            class: \"center\",\n                            __self: _assertThisInitialized(_assertThisInitialized(_this)),\n                            __source: {\n                              fileName: _jsxFileName,\n                              lineNumber: 38,\n                              columnNumber: 13\n                            }\n                          }, eventName), /*#__PURE__*/React.createElement(\"td\", {\n                            class: \"center\",\n                            __self: _assertThisInitialized(_assertThisInitialized(_this)),\n                            __source: {\n                              fileName: _jsxFileName,\n                              lineNumber: 39,\n                              columnNumber: 13\n                            }\n                          }, web3.utils.fromWei(ticketPrice, 'ether')), /*#__PURE__*/React.createElement(\"td\", {\n                            class: \"center\",\n                            __self: _assertThisInitialized(_assertThisInitialized(_this)),\n                            __source: {\n                              fileName: _jsxFileName,\n                              lineNumber: 40,\n                              columnNumber: 13\n                            }\n                          }, totalSupply - saleId), /*#__PURE__*/React.createElement(\"td\", {\n                            class: \"center\",\n                            __self: _assertThisInitialized(_assertThisInitialized(_this)),\n                            __source: {\n                              fileName: _jsxFileName,\n                              lineNumber: 42,\n                              columnNumber: 13\n                            }\n                          }, /*#__PURE__*/React.createElement(\"button\", {\n                            type: \"submit\",\n                            className: \"custom-btn login-btn\",\n                            onClick: _this.onPurchaseTicket.bind(_assertThisInitialized(_assertThisInitialized(_this)), marketplace, ticketPrice, initiator),\n                            __self: _assertThisInitialized(_assertThisInitialized(_this)),\n                            __source: {\n                              fileName: _jsxFileName,\n                              lineNumber: 42,\n                              columnNumber: 32\n                            }\n                          }, \"Buy\"))));\n\n                        case 11:\n                        case \"end\":\n                          return _context.stop();\n                      }\n                    }\n                  }, _callee);\n                }));\n\n                return function (_x) {\n                  return _ref2.apply(this, arguments);\n                };\n              }()));\n\n            case 9:\n              events = _context2.sent;\n\n              _this.setState({\n                events: fests\n              });\n\n              _context2.next = 17;\n              break;\n\n            case 13:\n              _context2.prev = 13;\n              _context2.t0 = _context2[\"catch\"](0);\n              renderNotification('danger', 'Error', _context2.t0.message);\n              console.log('Error while updating the fetivals', _context2.t0);\n\n            case 17:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2, null, [[0, 13]]);\n    }));\n\n    _this.onPurchaseTicket = /*#__PURE__*/function () {\n      var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(marketplace, ticketPrice, initiator) {\n        var marketplaceInstance;\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                _context3.prev = 0;\n                _context3.next = 3;\n                return EventMarketplace(marketplace);\n\n              case 3:\n                marketplaceInstance = _context3.sent;\n                _context3.next = 6;\n                return eventToken.methods.approve(marketplace, ticketPrice).send({\n                  from: initiator,\n                  gas: 6700000\n                });\n\n              case 6:\n                _context3.next = 8;\n                return marketplaceInstance.methods.purchaseTicket().send({\n                  from: initiator,\n                  gas: 6700000\n                });\n\n              case 8:\n                _context3.next = 10;\n                return _this.updateEvents();\n\n              case 10:\n                renderNotification('success', 'Success', \"Ticket for the Event purchased successfully!\");\n                _context3.next = 17;\n                break;\n\n              case 13:\n                _context3.prev = 13;\n                _context3.t0 = _context3[\"catch\"](0);\n                console.log('Error while creating new event', _context3.t0);\n                renderNotification('danger', 'Error', _context3.t0.message);\n\n              case 17:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, null, [[0, 13]]);\n      }));\n\n      return function (_x2, _x3, _x4) {\n        return _ref3.apply(this, arguments);\n      };\n    }();\n\n    _this.inputChangedHandler = function (e) {\n      var state = _this.state;\n      state[e.target.name] = e.target.value;\n\n      _this.setState(state);\n    };\n\n    _this.state = {\n      events: []\n    };\n    web3 = new Web3(window.ethereum);\n    return _this;\n  }\n\n  _createClass(Purchase, [{\n    key: \"componentDidMount\",\n    value: function () {\n      var _componentDidMount = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4() {\n        return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                _context4.next = 2;\n                return this.updateEvents();\n\n              case 2:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, this);\n      }));\n\n      function componentDidMount() {\n        return _componentDidMount.apply(this, arguments);\n      }\n\n      return componentDidMount;\n    }()\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _React$createElement;\n\n      return /*#__PURE__*/React.createElement(\"div\", (_React$createElement = {\n        class: \"container \"\n      }, _defineProperty(_React$createElement, \"class\", \"col s12 m6 offset-m3 l4 offset-l4 z-depth-6 card-panel\"), _defineProperty(_React$createElement, \"__self\", this), _defineProperty(_React$createElement, \"__source\", {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 7\n      }), _React$createElement), /*#__PURE__*/React.createElement(\"h4\", {\n        class: \"center\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 9\n        }\n      }, \"Purchase Tickets\"), /*#__PURE__*/React.createElement(\"table\", {\n        id: \"requests\",\n        class: \"responsive-table striped\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"thead\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"tr\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"th\", {\n        key: \"name\",\n        class: \"center\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 15\n        }\n      }, \"Name\"), /*#__PURE__*/React.createElement(\"th\", {\n        key: \"price\",\n        class: \"center\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 15\n        }\n      }, \"Price(in EVENT)\"), /*#__PURE__*/React.createElement(\"th\", {\n        key: \"left\",\n        class: \"center\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 15\n        }\n      }, \"Tickets Left\"), /*#__PURE__*/React.createElement(\"th\", {\n        key: \"purchase\",\n        class: \"center\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 15\n        }\n      }, \"Purchase\"))), /*#__PURE__*/React.createElement(\"tbody\", {\n        class: \"striped highlight\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 11\n        }\n      }, this.state.events)));\n    }\n  }]);\n\n  return Purchase;\n}(Component);\n\nexport default Purchase;","map":{"version":3,"sources":["/workspace/nft-ticket-market/client/src/components/Purchase.jsx"],"names":["React","Component","Web3","eventFactory","EventNFT","EventMarketplace","eventToken","renderNotification","web3","Purchase","updateEvents","eth","getCoinbase","initiator","methods","getActiveEvents","call","from","activeEvents","Promise","all","map","fest","getEventDetails","event","eventDetails","Object","values","eventName","eventSymbol","ticketPrice","totalSupply","marketplace","nftInstance","getNextSaleTicketId","saleId","utils","fromWei","onPurchaseTicket","bind","events","setState","fests","message","console","log","marketplaceInstance","approve","send","gas","purchaseTicket","inputChangedHandler","e","state","target","name","value","window","ethereum"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport Web3 from 'web3';\nimport eventFactory from '../proxies/eventFactory';\nimport EventNFT from '../proxies/EventNFT';\nimport EventMarketplace from '../proxies/EventMarketplace';\nimport eventToken from '../proxies/EventToken';\nimport renderNotification from '../utils/notification-handler';\n\nlet web3;\n\nclass Purchase extends Component {\n  constructor() {\n    super();\n\n    this.state = {\n      events: [],\n    };\n\n    web3 = new Web3(window.ethereum);\n  }\n\n  async componentDidMount() {\n    await this.updateEvents();\n  }\n\n  updateEvents = async () => {\n    try {\n      const initiator = await web3.eth.getCoinbase();\n      const activeEvents = await eventFactory.methods.getActiveEvents().call({ from: initiator });\n      const events = await Promise.all(activeEvents.map(async fest => {\n        const eventDetails = await eventFactory.methods.getEventDetails(event).call({ from: initiator });\n        const [eventName, eventSymbol, ticketPrice, totalSupply, marketplace] = Object.values(eventDetails);\n        const nftInstance = await EventNFT(event);\n        const saleId = await nftInstance.methods.getNextSaleTicketId().call({ from: initiator });\n\n        return (\n          <tr key={event}>\n            <td class=\"center\">{eventName}</td>\n            <td class=\"center\">{web3.utils.fromWei(ticketPrice, 'ether')}</td>\n            <td class=\"center\">{totalSupply - saleId}</td>\n\n            <td class=\"center\"><button type=\"submit\" className=\"custom-btn login-btn\" onClick={this.onPurchaseTicket.bind(this, marketplace, ticketPrice, initiator)}>Buy</button></td>\n          </tr>\n        );\n      }));\n\n      this.setState({ events: fests });\n    } catch (err) {\n      renderNotification('danger', 'Error', err.message);\n      console.log('Error while updating the fetivals', err);\n    }\n  }\n\n  onPurchaseTicket = async (marketplace, ticketPrice, initiator) => {\n    try {\n      const marketplaceInstance = await EventMarketplace(marketplace);\n      await eventToken.methods.approve(marketplace, ticketPrice).send({ from: initiator, gas: 6700000 });\n      await marketplaceInstance.methods.purchaseTicket().send({ from: initiator, gas: 6700000 });\n      await this.updateEvents();\n\n      renderNotification('success', 'Success', `Ticket for the Event purchased successfully!`);\n    } catch (err) {\n      console.log('Error while creating new event', err);\n      renderNotification('danger', 'Error', err.message);\n    }\n  }\n\n  inputChangedHandler = (e) => {\n    const state = this.state;\n    state[e.target.name] = e.target.value;\n    this.setState(state);\n  }\n\n  render() {\n    return (\n      <div class=\"container \" class=\"col s12 m6 offset-m3 l4 offset-l4 z-depth-6 card-panel\">\n        <h4 class=\"center\">Purchase Tickets</h4>\n        <table id='requests' class=\"responsive-table striped\" >\n          <thead>\n            <tr>\n              <th key='name' class=\"center\">Name</th>\n              <th key='price' class=\"center\">Price(in EVENT)</th>\n              <th key='left' class=\"center\">Tickets Left</th>\n              <th key='purchase' class=\"center\">Purchase</th>\n            </tr>\n          </thead>\n          <tbody class=\"striped highlight\">\n            {this.state.events}\n          </tbody>\n        </table>\n      </div >\n    )\n  }\n}\n\nexport default Purchase;  "]},"metadata":{},"sourceType":"module"}